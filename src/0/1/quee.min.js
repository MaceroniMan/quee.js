var __key_callbacks={},__images={},VERSION="0.1";function __key_callback(i){i.key in __key_callbacks&&__key_callbacks[i.key](i.key)}function __get_dims(i){var e=i.image.height*i.scale,n=i.image.width*i.scale*i.image.height/i.image.width;return[i.x,i.y,n,e]}function __collided(i,e){const[n,t,o,s]=__get_dims(i),[_,c,r,a]=__get_dims(e);return!(_>s+n||n>a+_||c>o+t||t>r+c)}function __if_collision(i){var e=[];for(sprite in i)if(0!=i[sprite].clip)for(osprites in i){if(osprites==sprite)break;0==i[osprites].clip||__collided(i[sprite],i[osprites])&&e.push([i[sprite],i[osprites]])}return e}document.getElementById("quee_canvas").width=window.innerWidth,document.getElementById("quee_canvas").height=window.innerHeight,document.onkeydown=__key_callback;const quee_window={Console:{Error:function(i){console.error("[quee.js error] "+i)},Warning:function(i){console.warn("[quee.js warning] "+i)},Info:function(i){console.info("[quee.js info] "+i)}},Cookies:{SetCookie:function(i,e){document.cookie=i+"="+e+";"},GetCookie:function(i){for(var e=i+"=",n=decodeURIComponent(document.cookie).split(";"),t=0;t<n.length;t+=1){for(var o=n[t];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}},Title:function(i){document.title=i}},quee_image={LoadImage:function(i,e,n){e in __images&&quee_window.Console.Warning("The image: "+e+" already exists");var t=new Image;t.setAttribute("crossOrigin","anonymous"),t.onload=function(){__images[e]=t,quee_window.Console.Info("The image: "+e+" is loaded"),n(e,i)},t.src=i}},quee_input={Key:{Bind:function(i,e){i in __key_callbacks&&quee_window.Console.Warning("The keybind: "+i+" is already set."),__key_callbacks[i]=e},Up:"ArrowUp",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight"}},quee_ui={__canvas:document.getElementById("quee_canvas"),Move:{Up:function(i,e,n=10){return function(){i.y-=n,i.__backward=[0,n],e.draw()}},Down:function(i,e,n=10){return function(){i.y+=n,i.__backward=[0,-n],e.draw()}},Right:function(i,e,n=10){return function(){i.x+=n,i.__backward=[-n,0],e.draw()}},Left:function(i,e,n=10){return function(){i.x-=n,i.__backward=[n,0],e.draw()}}},Delete:function(i,e){return function(){i.__exist=!1,e.draw()}},Sprite:function(i,e,n={}){"scale"in n||(n.scale=1),"clip"in n||(n.clip=!0),this.x=0,this.y=0,this.scale=n.scale,this.clip=n.clip,this.__collision_callback=function(){},this.__backward=[0,0],this.__world=i,this.__exist=!0,e in __images?this.image=__images[e]:quee_window.Console.Error("The image: "+e+" does not exist!"),this.__world.__add(this),this.Collision=function(i){this.__collision_callback=i},this.ChangeImage=function(i){i in __images?this.image=__images[i]:quee_window.Console.Error("The image: "+i+" does not exist!")}},World:function(){quee_window.Console.Info("quee.js version: "+VERSION),this.__sprites=[],this.x=0,this.y=0,this.__add=function(i){this.__sprites.push(i)},this.draw=function(){this.clear(),ctx=quee_ui.__canvas.getContext("2d");var i=__if_collision(this.__sprites);for(collision in i)i[collision][0].__collision_callback(i[collision][1]),i[collision][0].x+=i[collision][0].__backward[0],i[collision][0].y+=i[collision][0].__backward[1],i[collision][1].__collision_callback(i[collision][0]),i[collision][1].x+=i[collision][1].__backward[0],i[collision][1].y+=i[collision][1].__backward[1];var e=[];for(spritenum in this.__sprites)0==this.__sprites[spritenum].__exist||(e.push(this.__sprites[spritenum]),sprite=this.__sprites[spritenum],ctx.drawImage(sprite.image,sprite.x+this.x,sprite.y+this.y,sprite.image.height*sprite.scale,sprite.image.width*sprite.scale*sprite.image.height/sprite.image.width));this.__sprites=e},this.clear=function(){ctx=quee_ui.__canvas.getContext("2d"),ctx.clearRect(0,0,quee_ui.__canvas.width,quee_ui.__canvas.height)}}};